<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YKNC7L8DV7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YKNC7L8DV7');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3994230437494776"
         crossorigin="anonymous"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê± Meow Bot - Twitch Chat Enhancement | Meow Links</title>
    <meta name="description" content="Add Meow Bot to your Twitch channel for automatic meow counting and global leaderboard competition">
    <meta name="keywords" content="twitch bot, meow bot, chat bot, twitch counter, global leaderboard">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f431.png" />
    <link rel="stylesheet" href="style.css" />
    
    <style>
        /* Enhanced Message System Styles */
        .message-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            max-width: 400px;
            min-width: 300px;
        }

        .status-message {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px 25px;
            margin-bottom: 10px;
            border: 2px solid;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: slideInRight 0.5s ease-out;
            font-family: 'Inter', sans-serif;
            position: relative;
            overflow: hidden;
        }

        /* Loading Message */
        .status-loading {
            border-color: rgba(145, 70, 255, 0.6);
            background: linear-gradient(135deg, rgba(145, 70, 255, 0.15), rgba(119, 44, 232, 0.15));
            color: #ffffff;
        }

        .status-loading::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #9146ff, transparent);
            animation: loadingBar 2s infinite;
        }

        /* Success Message */
        .status-success {
            border-color: rgba(50, 205, 50, 0.6);
            background: linear-gradient(135deg, rgba(50, 205, 50, 0.15), rgba(40, 180, 40, 0.15));
            color: #ffffff;
        }

        .status-success::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #32cd32, #00ff00, #32cd32);
            background-size: 200% 100%;
            animation: successGlow 3s ease-in-out;
        }

        /* Error Message */
        .status-error {
            border-color: rgba(231, 76, 60, 0.6);
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.15), rgba(192, 57, 43, 0.15));
            color: #ffffff;
        }

        .status-error::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #e74c3c;
        }

        /* Network Error Message */
        .status-network-error {
            border-color: rgba(255, 165, 0, 0.6);
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.15), rgba(255, 140, 0, 0.15));
            color: #ffffff;
        }

        .status-network-error::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #ffa500;
        }

        /* Message Content */
        .message-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .message-icon {
            font-size: 1.5rem;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
        }

        .message-body {
            font-size: 0.95rem;
            line-height: 1.4;
            opacity: 0.9;
        }

        .message-details {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .channel-name {
            font-weight: 600;
            color: #9146ff;
            text-shadow: 0 0 10px rgba(145, 70, 255, 0.5);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        /* Animations */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes loadingBar {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes successGlow {
            0%, 100% { 
                background-position: 0% 50%;
                opacity: 1;
            }
            50% { 
                background-position: 100% 50%;
                opacity: 0.8;
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .message-container {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
                min-width: auto;
            }

            .status-message {
                padding: 15px 20px;
            }

            .message-header {
                font-size: 1rem;
            }

            .message-body {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="particles">
        <div class="particle" style="left: 10%; animation-delay: 0s;">‚ú®</div>
        <div class="particle" style="left: 25%; animation-delay: 4s;">üåü</div>
        <div class="particle" style="left: 40%; animation-delay: 8s;">üí´</div>
        <div class="particle" style="left: 60%; animation-delay: 12s;">‚≠ê</div>
        <div class="particle" style="left: 80%; animation-delay: 16s;">üîÆ</div>
        <div class="particle" style="left: 15%; animation-delay: 20s;">‚ú®</div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="nav-brand">üê± MeowLinks</a>
                <ul class="nav-links">
                    <li><a href="index.html" class="nav-link">Home</a></li>
                    <li><a href="index.html#bots" class="nav-link">Bots</a></li>
                    <li><a href="twitch.html" class="nav-link active">Twitch Bot</a></li>
                    <li><a href="https://discord.gg/tba3sPkR" target="_blank" class="nav-link">Support</a></li>
                    <li><a href="patch-notes.html" class="nav-link">Patch Notes</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero">
                <div class="container">
                    <div class="hero-card">
                        <h1 class="hero-title text-center">üê± TWITCH MEOW BOT</h1>
                        <p class="hero-subtitle text-center">
                            Automatic Meow Counter for Twitch Streams
                        </p>
                        <div class="hero-description text-center">
                            <p>üéÆ Turn your chat into a <span class="highlight">meow-counting paradise!</span> Track every "meow" and compete for the top spot.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions Section -->
            <section class="quick-actions-section">
                <div class="container">
                    <div class="quick-actions-container">
                        <h2>ü§ñ Add Bot to Your Channel</h2>
                        <p>Ready to start counting meows? Add the bot now!</p>
                        
                        <div class="quick-actions">
                            <a href="https://id.twitch.tv/oauth2/authorize?client_id=i8doijnvc4wkt0q5et2fb7ucb7mng7&redirect_uri=https://fireflydesigns.me/twitch.html&response_type=code&scope=chat:read+chat:edit+channel:moderate" 
                               class="action-card action-twitch" target="_blank">
                                <span class="action-icon">üì∫</span>
                                <div class="action-title">Add Bot to Channel</div>
                            </a>
                        </div>
                        
                        <div class="twitch-features">
                            <div class="twitch-feature">‚úÖ Secure Twitch authorization</div>
                            <div class="twitch-feature">‚úÖ Bot joins instantly</div>
                        </div>

                        <div class="setup-guide">
                            <strong>Quick Setup:</strong> 1. Click button above ‚Üí 2. Login to Twitch ‚Üí 3. Authorize ‚Üí Done!
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bot Features Section -->
            <section class="bots-section">
                <div class="container">
                    <div class="bots-grid">
                        <div class="bot-card">
                            <div class="bot-header">
                                <span class="bot-icon">üê±</span>
                                <h3 class="bot-title">Twitch Meow Bot Counter Features</h3>
                            </div>

                            <div class="bot-features">
                                <h4>üê± Twitch Meow Bot Features</h4>
                                <div class="features-grid">
                                    <div class="feature-item">‚≠ê Counts every "meow" typed in chat (works with meow, MEOW, meoooow, etc.)</div>
                                    <div class="feature-item">üìä Tracks personal and channel statistics</div>
                                    <div class="feature-item">üèÜ Creates leaderboards for your channel and across all channels</div>
                                    <div class="feature-item">üíæ Remembers all meow data permanently</div>
                                    <div class="feature-item">üîÑ Works 24/7, even when you're offline</div>
                                </div>

                                <div class="bot-tip">
                                    <strong>üí° Test it out:</strong> The bot starts working immediately - no setup required. Test it by typing "meow" in your chat, then use <code>!meow</code> to see your count!
                                </div>
                            </div>
                        </div>

                        <div class="bot-card">
                            <div class="bot-header">
                                <span class="bot-icon">üí¨</span>
                                <h3 class="bot-title">Chat Commands</h3>
                            </div>

                            <div class="bot-features">
                                <div class="command-grid">
                                    <div class="command-item">
                                        <code>!meow</code>
                                        <span>Your meow count</span>
                                    </div>
                                    <div class="command-item">
                                        <code>!top</code>
                                        <span>Top 5 meowers</span>
                                    </div>
                                    <div class="command-item">
                                        <code>!global</code>
                                        <span>Global leaderboard</span>
                                    </div>
                                    <div class="command-item">
                                        <code>!requestbot</code>
                                        <span>Add bot to channel</span>
                                    </div>
                                    <div class="command-item">
                                        <code>!optinglobal</code>
                                        <span>Join global leaderboard</span>
                                    </div>
                                    <div class="command-item">
                                        <code>!help</code>
                                        <span>Show all commands</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Message Container for OAuth Status -->
    <div class="message-container" id="messageContainer"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="privacy.html" class="footer-link">Privacy Policy</a>
                <a href="terms.html" class="footer-link">Terms of Service</a>
                <a href="https://discord.gg/tba3sPkR" target="_blank" class="footer-link">Support</a>
                <a href="https://ko-fi.com/fireflyxserenity" target="_blank" class="footer-link">Donate</a>
            </div>
            <p class="footer-text">&copy; 2025 Meow Links. Made with üíú for the Discord community.</p>
            <div class="footer-credit">
                üí° <strong>Original Concept:</strong> SnorlaxBuffet
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Message System Functions
        function showMessage(type, data = {}) {
            const container = document.getElementById('messageContainer');
            let messageHTML = '';
            
            switch(type) {
                case 'loading':
                    messageHTML = `
                        <div class="status-message status-loading" id="loadingMessage">
                            <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                            <div class="message-header">
                                <span class="message-icon">ü§ñ</span>
                                <span>Adding Bot to Channel</span>
                            </div>
                            <div class="message-body">
                                Connecting to Twitch and setting up your bot...
                            </div>
                            <div class="message-details">
                                This usually takes 3-5 seconds
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'success':
                    messageHTML = `
                        <div class="status-message status-success">
                            <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                            <div class="message-header">
                                <span class="message-icon">üéâ</span>
                                <span>Bot Successfully Added!</span>
                            </div>
                            <div class="message-body">
                                Meow Bot has been added to <span class="channel-name">${data.channel || 'your'}</span> channel!
                            </div>
                            <div class="message-details">
                                üê± Start typing "meow" in your chat and use <strong>!meow</strong> to see your count!
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'error':
                    messageHTML = `
                        <div class="status-message status-error">
                            <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                            <div class="message-header">
                                <span class="message-icon">‚ùå</span>
                                <span>Authorization Failed</span>
                            </div>
                            <div class="message-body">
                                Bot could not be added to your channel.
                            </div>
                            <div class="message-details">
                                Error: ${data.error || 'Unknown error occurred'}. Please try again or contact support if the problem persists.
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'network':
                    messageHTML = `
                        <div class="status-message status-network-error">
                            <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                            <div class="message-header">
                                <span class="message-icon">üåê</span>
                                <span>Connection Error</span>
                            </div>
                            <div class="message-body">
                                Unable to connect to bot service.
                            </div>
                            <div class="message-details">
                                Please check your internet connection and try again. If the problem continues, our servers may be temporarily unavailable.
                            </div>
                        </div>
                    `;
                    break;
            }
            
            container.insertAdjacentHTML('beforeend', messageHTML);
            
            // Auto-remove after 8 seconds (except loading)
            if (type !== 'loading') {
                setTimeout(() => {
                    const messages = container.querySelectorAll('.status-message');
                    const lastMessage = messages[messages.length - 1];
                    if (lastMessage && lastMessage.parentElement) {
                        lastMessage.style.animation = 'slideInRight 0.5s ease-out reverse';
                        setTimeout(() => {
                            if (lastMessage.parentElement) {
                                lastMessage.remove();
                            }
                        }, 500);
                    }
                }, 8000);
            }
        }

        function clearLoadingMessage() {
            const loadingMsg = document.getElementById('loadingMessage');
            if (loadingMsg) {
                loadingMsg.remove();
            }
        }

        // Check if user just came back from authorization
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const error = urlParams.get('error');
            
            if (code) {
                handleAuthorization(code);
            } else if (error) {
                showMessage('error', { error: 'Authorization was cancelled or failed' });
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });

        async function handleAuthorization(code) {
            // Show loading message
            showMessage('loading');
            
            try {
                const response = await fetch('https://oauthmeow-production.up.railway.app/api/authorize-bot', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        code: code,
                        redirect_uri: 'https://fireflydesigns.me/twitch.html'
                    })
                });

                const result = await response.json();
                
                // Clear loading message
                clearLoadingMessage();
                
                if (result.success) {
                    // Show success message with channel name if available
                    showMessage('success', { 
                        channel: result.channel || result.username || 'your' 
                    });
                } else {
                    // Show error message with specific error
                    showMessage('error', { 
                        error: result.error || 'Unknown error occurred' 
                    });
                }
                
            } catch (error) {
                console.error('Authorization error:', error);
                
                // Clear loading message
                clearLoadingMessage();
                
                // Show network error message
                showMessage('network');
            }

            // Clean up the URL
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    </script>
</body>
</html>
